{"componentChunkName":"component---src-templates-blog-post-js","path":"/Gatsby/","result":{"data":{"site":{"siteMetadata":{"title":"ljho01"}},"markdownRemark":{"id":"b463dcc5-1a70-5663-9c57-9317b5da4975","excerpt":"다크모드 구현 토글 컴포넌트 index.html에 스크립트 삽입 내가 기반으로 사용중인 gatsby-blog-starter는 html.js가 없는데, .cache/default-html.js 파일을 src폴더로 가져와서 html.js로 바꿔주면 된다.\r\n그 다음 body…","html":"<h2 id=\"다크모드-구현\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%ED%81%AC%EB%AA%A8%EB%93%9C-%EA%B5%AC%ED%98%84\" aria-label=\"다크모드 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다크모드 구현</h2>\n<h3 id=\"토글-컴포넌트\" style=\"position:relative;\"><a href=\"#%ED%86%A0%EA%B8%80-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8\" aria-label=\"토글 컴포넌트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>토글 컴포넌트</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React, { useState, useEffect } from \"react\"\r\nimport \"./themetog.css\"\r\n\r\n\r\nconst Toggle = () => {\r\n    const websiteTheme = typeof window != `undefined` ? window.__theme : null\r\n    const [ theme, setTheme ] = useState(websiteTheme)\r\n    useEffect(() => {\r\n        setTheme(window.__theme)\r\n        window.__onThemeChange = () => {\r\n        setTheme(window.__theme)\r\n        }\r\n    }, [])\r\n\r\n    const ThemeToggle = () => {\r\n        window.__setPreferredTheme(websiteTheme === 'dark' ? 'light' : 'dark')\r\n    }\r\n    return (\r\n        &lt;>\r\n            &lt;button onClick={ThemeToggle} id=\"tog\"/>\r\n            &lt;label className=\"toggleback\" htmlFor=\"tog\">\r\n                    &lt;div className=\"togglecon\"/>\r\n            &lt;/label>\r\n        &lt;/>   \r\n    )\r\n}\r\n\r\nexport default Toggle</code></pre></div>\n<h3 id=\"indexhtml에-스크립트-삽입\" style=\"position:relative;\"><a href=\"#indexhtml%EC%97%90-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%82%BD%EC%9E%85\" aria-label=\"indexhtml에 스크립트 삽입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>index.html에 스크립트 삽입</h3>\n<p>내가 기반으로 사용중인 gatsby-blog-starter는 html.js가 없는데, .cache/default-html.js 파일을 src폴더로 가져와서 html.js로 바꿔주면 된다.\r\n그 다음 body태그에 'light'과 같은 기본 테마를 <code class=\"language-text\">className</code>으로 지정해주고</p>\n<p><code class=\"language-text\">dangerouslySetInnerHtml</code> 사용하여 다음 스크립트를 삽입.\r\n<a href=\"https://overreacted.io\">https://overreacted.io</a> 를 참고함</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;script dangerouslySetInnerHTML={{\r\n\t\t__html: `\r\n        \t(function() {\r\n                window.__onThemeChange = function() {};\r\n                function setTheme(newTheme) {\r\n                  window.__theme = newTheme;\r\n                  preferredTheme = newTheme;\r\n                  document.body.className = newTheme;\r\n                  window.__onThemeChange(newTheme);\r\n                }\r\n                var preferredTheme;\r\n                try {\r\n                  preferredTheme = localStorage.getItem('theme');\r\n                } catch (err) { }\r\n                window.__setPreferredTheme = function(newTheme) {\r\n                  setTheme(newTheme);\r\n                  try {\r\n                    localStorage.setItem('theme', newTheme);\r\n                  } catch (err) {}\r\n                }\r\n                var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n                darkQuery.addListener(function(e) {\r\n                  window.__setPreferredTheme(e.matches ? 'dark' : 'light')\r\n                });\r\n                setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));\r\n              })();\r\n            `,\r\n        }}\r\n/></code></pre></div>\n<h3 id=\"css\" style=\"position:relative;\"><a href=\"#css\" aria-label=\"css permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.light {\r\n  --color-text: black;\r\n  --color-text-sub: var(--black-90);\r\n  --color-line: rgba(10,10,10,0.2);\r\n}\r\n\r\n\r\n.dark {\r\n  --color-text: white;\r\n  --color-text-sub: var(--black-10);\r\n  --color-line: rgba(240,240,240,0.2);\r\n}</code></pre></div>\n<p>이런 식으로 변수를 만들어주면 된다.</p>\n<h2 id=\"네비바헤더-자동-숨기기\" style=\"position:relative;\"><a href=\"#%EB%84%A4%EB%B9%84%EB%B0%94%ED%97%A4%EB%8D%94-%EC%9E%90%EB%8F%99-%EC%88%A8%EA%B8%B0%EA%B8%B0\" aria-label=\"네비바헤더 자동 숨기기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네비바(헤더) 자동 숨기기</h2>\n<p>스크롤을 내리면 사라지고 올리면 나타난다.\r\n<a href=\"https://lxieyang.github.io/blogs/tech-2018-08-18-reactstrap-gatsby-auto-hiding-navbar-trick/\">https://lxieyang.github.io/blogs/tech-2018-08-18-reactstrap-gatsby-auto-hiding-navbar-trick/</a></p>\n<h2 id=\"toc-만들기\" style=\"position:relative;\"><a href=\"#toc-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"toc 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TOC 만들기</h2>\n<h3 id=\"gatsby-remark-autolink-headers-설치\" style=\"position:relative;\"><a href=\"#gatsby-remark-autolink-headers-%EC%84%A4%EC%B9%98\" aria-label=\"gatsby remark autolink headers 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>gatsby-remark-autolink-headers 설치</h3>\n<p><a href=\"https://www.gatsbyjs.com/plugins/gatsby-remark-autolink-headers/\">https://www.gatsbyjs.com/plugins/gatsby-remark-autolink-headers/</a>\r\n<code class=\"language-text\">npm install --save gatsby-remark-autolink-headers</code>\r\n각 제목들에 링크를 달아주는 역할을 함. 설치 후 gatsby-config에서\r\n<code class=\"language-text\">gatsby-transformer-remark</code> 아래 plugin에 추가해준다.</p>\n<h3 id=\"graphql-쿼리\" style=\"position:relative;\"><a href=\"#graphql-%EC%BF%BC%EB%A6%AC\" aria-label=\"graphql 쿼리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>graphql 쿼리</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export const pageQuery = graphql`\r\n  query BlogPostBySlug(\r\n    $id: String!\r\n    $previousPostId: String\r\n    $nextPostId: String\r\n  ) {\r\n    site {\r\n      siteMetadata {\r\n        title\r\n      }\r\n    }\r\n    markdownRemark(id: { eq: $id }) {\r\n      id\r\n      excerpt(pruneLength: 160)\r\n      html\r\n      tableOfContents\r\n   \t}</code></pre></div>\n<p><code class=\"language-text\">blog-post.js</code>의 일부이다. tableOfContents를 알아서 잘 불러와준다. html태그형태로 불러와지니 <code class=\"language-text\">dangerouslySetInnerHTML</code>로 밀어넣어주면 된다.</p>\n<h3 id=\"네비바와-스크롤\" style=\"position:relative;\"><a href=\"#%EB%84%A4%EB%B9%84%EB%B0%94%EC%99%80-%EC%8A%A4%ED%81%AC%EB%A1%A4\" aria-label=\"네비바와 스크롤 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네비바와 스크롤</h3>\n<p>문제는 toc에서 각 제목으로 클릭해서 이동하면 제목이 위에 딱 붙는 식으로 스크롤이 되어버려서 네비바에 가려진다는 것..\r\ncss의 <code class=\"language-text\">scroll-margin-top</code>을 사용하면 약간의 여백을 만들어서 쉽게 해결할 수 있다.\r\n<code class=\"language-text\">gatsby-remark-autolink-headers</code>에 <code class=\"language-text\">offsetY</code>라는 속성이 이 역할을 한다고는 나와있는데 뭘 잘못했는지 작동을 안했다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%8B%A4%ED%81%AC%EB%AA%A8%EB%93%9C-%EA%B5%AC%ED%98%84\">다크모드 구현</a></p>\n<ul>\n<li><a href=\"#%ED%86%A0%EA%B8%80-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8\">토글 컴포넌트</a></li>\n<li><a href=\"#indexhtml%EC%97%90-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%82%BD%EC%9E%85\">index.html에 스크립트 삽입</a></li>\n<li><a href=\"#css\">CSS</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%84%A4%EB%B9%84%EB%B0%94%ED%97%A4%EB%8D%94-%EC%9E%90%EB%8F%99-%EC%88%A8%EA%B8%B0%EA%B8%B0\">네비바(헤더) 자동 숨기기</a></p>\n</li>\n<li>\n<p><a href=\"#toc-%EB%A7%8C%EB%93%A4%EA%B8%B0\">TOC 만들기</a></p>\n<ul>\n<li><a href=\"#gatsby-remark-autolink-headers-%EC%84%A4%EC%B9%98\">gatsby-remark-autolink-headers 설치</a></li>\n<li><a href=\"#graphql-%EC%BF%BC%EB%A6%AC\">graphql 쿼리</a></li>\n<li><a href=\"#%EB%84%A4%EB%B9%84%EB%B0%94%EC%99%80-%EC%8A%A4%ED%81%AC%EB%A1%A4\">네비바와 스크롤</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"Gatsby","date":"July 21, 2022","description":"Gatsby로 블로그 만들면서 기록한 것"}},"previous":{"fields":{"slug":"/lis/"},"frontmatter":{"title":"LIS (Longest Increasing Sequence)"}},"next":{"fields":{"slug":"/outlier/"},"frontmatter":{"title":"IQR Score를 활용한 Outlier 탐지"}}},"pageContext":{"id":"b463dcc5-1a70-5663-9c57-9317b5da4975","previousPostId":"fbf3db05-4463-5bb1-8990-6a6bdf07e2b0","nextPostId":"3ebc2f2d-6164-5c99-bcea-434460e97406"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}