{"componentChunkName":"component---src-templates-blog-post-js","path":"/GooglePhoto/","result":{"data":{"site":{"siteMetadata":{"title":"ljho01"}},"markdownRemark":{"id":"fadbbf33-71d1-56fa-8f50-fb207151e224","excerpt":"학교 계정으로 구글 포토를 무제한으로 쓰다가 20GB로 제한되어서 그만 쓰려고 한다. 문제 일괄 저장 기능 없음 웹 구글 포토 상에서는 일괄 저장 기능이 없다........ 몇천장 되는 사진을 일일이 체크할 수는 없다.\r\nhttps://takeout.google.com…","html":"<p>학교 계정으로 구글 포토를 무제한으로 쓰다가 20GB로 제한되어서 그만 쓰려고 한다.</p>\n<h2 id=\"문제\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C\" aria-label=\"문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제</h2>\n<h3 id=\"일괄-저장-기능-없음\" style=\"position:relative;\"><a href=\"#%EC%9D%BC%EA%B4%84-%EC%A0%80%EC%9E%A5-%EA%B8%B0%EB%8A%A5-%EC%97%86%EC%9D%8C\" aria-label=\"일괄 저장 기능 없음 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>일괄 저장 기능 없음</h3>\n<p>웹 구글 포토 상에서는 일괄 저장 기능이 없다........ 몇천장 되는 사진을 일일이 체크할 수는 없다.\r\n<a href=\"https://takeout.google.com/\">https://takeout.google.com/</a> 에서 사진만 체크하고 따로 뽑아준다. 내보내기를 누르고 수 분이 지나면 다운로드 링크를 메일로 보내준다.\r\n재밌는 점은 일괄 삭제 기능도 없어서 구글에서 자바 스크립트 찾아서 삭제했다.</p>\n<h3 id=\"파일-이름-중복\" style=\"position:relative;\"><a href=\"#%ED%8C%8C%EC%9D%BC-%EC%9D%B4%EB%A6%84-%EC%A4%91%EB%B3%B5\" aria-label=\"파일 이름 중복 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>파일 이름 중복</h3>\n<ul>\n<li>takeout에서 받은 압축 파일에는 년도 별로 폴더가 분리되어있다.</li>\n<li>아이폰에서는 사진 파일 이름이 IMG_xxxx.jpg와 같은 형식으로 저장된다. 폰을 초기화해서 사진이 아예 없다면 0부터 다시 시작한다. (갤럭시는 날짜, 시각으로 되어있다.)</li>\n<li>구글 포토에서는 파일 이름을 원본 그대로 사용한다.</li>\n</ul>\n<p>그래서 2016년의 IMG_1234.JPG가 2017년의 동명 파일과 겹치는 문제가 발생한다.</p>\n<p>또 다른 문제는\r\nIMG_0001.jpg와 IMG_0001(2).jpg가 공존하는 경우 json이 IMG_0001.jpg (2).json 뭐 이딴식으로 생성되는 문제였다. 이게 이유가 저거 때문인지는 확실히 기억이 안나는데..\r\n아무튼 이런 문제가 있었다.</p>\n<p>전자는 이미지와 json파일 둘다 숫자를 더 붙여서, 후자는 일일히 .jpg (2).json을 (2).jpg.json으로 바꿔주며 해결했다.</p>\n<h2 id=\"메타데이터-정리\" style=\"position:relative;\"><a href=\"#%EB%A9%94%ED%83%80%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%95%EB%A6%AC\" aria-label=\"메타데이터 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>메타데이터 정리</h2>\n<p>이상하게 사진의 메타데이터를 사진명.JSON의 형식으로 분리해서 준다.. 너무 불편하다.\r\n우선 1차적으로 <code class=\"language-text\">exiftool</code>을 사용하고 안된 파일에 대해서 <code class=\"language-text\">piexif</code>를 활용한다.</p>\n<h3 id=\"exiftool\" style=\"position:relative;\"><a href=\"#exiftool\" aria-label=\"exiftool permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>exiftool</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">exiftool \"-FileCreateDate&lt;CreateDate\" \"-FileModifyDate&lt;ModifyDate\" \"-GpsLatitude&lt;GeoDataExifLatitude\" \"-GpsLatitudeRef&lt;GeoDataExifLatitude\" \"-GPSLongitude&lt;GeoDataLongitude\" \"-GPSLongitudeRef&lt;GeoDataLongitude\"\"사진폴더\" -r</code></pre></div>\n<p>요렇게 날짜와 gps를 수정하는 코드를 cmd나 powershell에서 실행해준다.</p>\n<h3 id=\"검사\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%82%AC\" aria-label=\"검사 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검사</h3>\n<p>날짜와 gps가 잘 바뀌었는지 검사해야 된다.</p>\n<ul>\n<li>먼저 윈도우 탐색기에서 날짜별로 정렬 후 날짜가 이상한 파일을 json과 격리한다.</li>\n<li>보통 기기마다 gps정보 존재 여부가 달라서 기기에서 찍었을 것으로 예상되는 파일 중 몇개만 gps를 확인하고 잘 되어 있으면 전체 pass한다. gps 정보가 없을 경우 json을 확인해보고 json에도 없으면 pass한다. json에는 있고 그렇다면 격리한다.</li>\n</ul>\n<h3 id=\"piexif\" style=\"position:relative;\"><a href=\"#piexif\" aria-label=\"piexif permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>piexif</h3>\n<p><code class=\"language-text\">piexif</code>는 파이썬 라이브러리다. 위 검사에서 격리된 항목에 대해 piexif를 통해 날짜, gps정보를 추가한다. 그 다음 다시 위 검사를 반복한다. 거기서 남은 파일들은 애초에 정보가 잘못된 파일들일 것이다.</p>\n<h3 id=\"영상-처리\" style=\"position:relative;\"><a href=\"#%EC%98%81%EC%83%81-%EC%B2%98%EB%A6%AC\" aria-label=\"영상 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>영상 처리</h3>\n<p>영상도 <code class=\"language-text\">exiftool</code>선에서 해결이 되긴 한다. (나는 mov, mp4파일만 다뤘다.)\r\n그러나 영상은 윈도우 속성창에서 gps정보를 확인할 수 없어 <strong>검사</strong>를 할 때 gps정보가 잘 들어갔는지 알 턱이 없었다. 그래서 이건 또 <code class=\"language-text\">ffmpeg-python</code>라는 파이썬 라이브러리를 사용해서 메타데이터를 뽑아 확인하였다.</p>\n<h2 id=\"이름-중복-파일-정리\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%A6%84-%EC%A4%91%EB%B3%B5-%ED%8C%8C%EC%9D%BC-%EC%A0%95%EB%A6%AC\" aria-label=\"이름 중복 파일 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이름, 중복 파일 정리</h2>\n<h3 id=\"일괄-이름-수정\" style=\"position:relative;\"><a href=\"#%EC%9D%BC%EA%B4%84-%EC%9D%B4%EB%A6%84-%EC%88%98%EC%A0%95\" aria-label=\"일괄 이름 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>일괄 이름 수정</h3>\n<p>위와 같이 아이폰은 IMG_xxxx식으로 이미지에 이름을 붙이기 때문에 언제 또 이름이 겹칠지 모른다. 그래서 이미지, 영상들을 전부 날짜+시간을 포함해서 이름을 수정하였다. 프로그램이 있는지 찾아봤는데 날짜도 적용이 제대로 안되는 경우가 많고 비디오, heic 파일을 지원하는게 없어서 만들었다..(알씨, 포토스케이프 써봄)\r\n<a href=\"https://github.com/ljho01/ImageRenamer\">https://github.com/ljho01/ImageRenamer</a> 여기서 확인할 수 있다.</p>\n<h3 id=\"중복-파일-정리\" style=\"position:relative;\"><a href=\"#%EC%A4%91%EB%B3%B5-%ED%8C%8C%EC%9D%BC-%EC%A0%95%EB%A6%AC\" aria-label=\"중복 파일 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>중복 파일 정리</h3>\n<p>중복 유형이 두가지 있다.</p>\n<ol>\n<li>백업 복원을 여러번 거치면서 그냥 중복이 발생하는 경우</li>\n<li>JPG, HEIC가 공존하는 경우(이유 모름)</li>\n</ol>\n<p>보통 1번의 경우 확장자가 같기 때문에 중복검사 프로그램에서 쉽게 찾아낼 수 있다. 근데 문제는 2번인데, 확장자가 다르면 같은 사진이라도 감지를 못하더라.. 그래서 heic를 jpg로 일괄 변환해서 중복 검사를 돌렸다.</p>\n<p>글로 적으니 별거 아닌 것 같은데 4일동안 이거에만 매달렸다.. 코드를 안짜고 그냥 손으로 한게 대부분이라 시행착오도 잦았다. 다음에도 이러면 코드로 짜서 해야지</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C\">문제</a></p>\n<ul>\n<li><a href=\"#%EC%9D%BC%EA%B4%84-%EC%A0%80%EC%9E%A5-%EA%B8%B0%EB%8A%A5-%EC%97%86%EC%9D%8C\">일괄 저장 기능 없음</a></li>\n<li><a href=\"#%ED%8C%8C%EC%9D%BC-%EC%9D%B4%EB%A6%84-%EC%A4%91%EB%B3%B5\">파일 이름 중복</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A9%94%ED%83%80%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%95%EB%A6%AC\">메타데이터 정리</a></p>\n<ul>\n<li><a href=\"#exiftool\">exiftool</a></li>\n<li><a href=\"#%EA%B2%80%EC%82%AC\">검사</a></li>\n<li><a href=\"#piexif\">piexif</a></li>\n<li><a href=\"#%EC%98%81%EC%83%81-%EC%B2%98%EB%A6%AC\">영상 처리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B4%EB%A6%84-%EC%A4%91%EB%B3%B5-%ED%8C%8C%EC%9D%BC-%EC%A0%95%EB%A6%AC\">이름, 중복 파일 정리</a></p>\n<ul>\n<li><a href=\"#%EC%9D%BC%EA%B4%84-%EC%9D%B4%EB%A6%84-%EC%88%98%EC%A0%95\">일괄 이름 수정</a></li>\n<li><a href=\"#%EC%A4%91%EB%B3%B5-%ED%8C%8C%EC%9D%BC-%EC%A0%95%EB%A6%AC\">중복 파일 정리</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"구글 포토 사진 일괄 저장 및 정리","date":"August 26, 2022","description":null}},"previous":{"fields":{"slug":"/Python_SQL/"},"frontmatter":{"title":"Python + SQLite"}},"next":{"fields":{"slug":"/SQLDDLDML/"},"frontmatter":{"title":"SQL/DDL, DML"}}},"pageContext":{"id":"fadbbf33-71d1-56fa-8f50-fb207151e224","previousPostId":"99045786-fb46-5bae-bbc6-eb8a784f0112","nextPostId":"7f0d1f0b-ca5a-5ecd-b24d-3bb2557eabd4"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}